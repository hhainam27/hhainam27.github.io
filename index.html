<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Redirect Random Manga</title>
  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const res = await fetch("https://cuutruyen.net/api/v2/teams/1/mangas/recently_updated?page=1&per_page=50");
        const data = await res.json();

        if (!data || !Array.isArray(data.data) || data.data.length === 0) {
          throw new Error("Không có dữ liệu");
        }

        // Chọn manga ngẫu nhiên
        const randomManga = data.data[Math.floor(Math.random() * data.data.length)];

        // Tạo URL slug
        const mangaSlug = randomManga.slug || randomManga.title?.toLowerCase().replace(/\s+/g, "-");

        // Redirect tới trang manga
        window.location.href = `https://cuutruyen.net/t/${mangaSlug}`;
      } catch (err) {
        console.error("Lỗi khi random manga:", err);
        document.body.innerHTML = `<h2 style="color: red; text-align: center;">Không thể tải danh sách manga</h2>`;
      }
    });
  </script>
</head>
<body>
  <h1 style="text-align: center;">Đang chuyển hướng đến một manga ngẫu nhiên...</h1>
</body>
</html>
